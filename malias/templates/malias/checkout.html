{% extends 'base.html' %}
{% load humanize %}

{% block main %}

<div class="checkout-area">
    <div class="container">
        <div class="row">
            <form method="post" action="{% url 'payment' %}">
                {% csrf_token %}
                <div class="col-md-12">
                    <div class="cart-title">
                        <h2 class="entry-title">Checkout</h2>
                    </div>
                    <div class="panel-group" id="accordion">
                        <div class="panel panel_default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-trigger collapsed" data-toggle="collapse"
                                       data-parent="#accordion"
                                       href="#shipping-address">Step 1: Delivery Details <i
                                            class="fa fa-caret-down"></i>
                                    </a>
                                </h4>
                            </div>
                            <div id="shipping-address" class="collapse">
                                <div class="panel-body">
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>First Name</label>
                                            <div class="col-sm-10">
                                                {{ user_form.first_name }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>Last Name</label>
                                            <div class="col-sm-10">
                                                {{ user_form.last_name }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>Phone number</label>
                                            <div class="col-sm-10">
                                                {{ form.phone }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>Country</label>
                                            <div class="col-sm-10">
                                                {{ form.country }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>City</label>
                                            <div class="col-sm-10">
                                                {{ form.city }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>District / County</label>
                                            <div class="col-sm-10">
                                                {{ form.district }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>Street</label>
                                            <div class="col-sm-10">
                                                {{ form.street }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"><sup>*</sup>Home</label>
                                            <div class="col-sm-10">
                                                {{ form.home }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Flat</label>
                                            <div class="col-sm-10">
                                                {{ form.flat }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Comment</label>
                                            <div class="col-sm-10">
                                                {{ form.comment }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel_default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-trigger collapsed" data-toggle="collapse"
                                       data-parent="#accordion"
                                       href="#shipping-method">Step 2: Delivery Method <i class="fa fa-caret-down"></i>
                                    </a>
                                </h4>
                            </div>
                            <div id="shipping-method" class="collapse">
                                <div class="panel-body">
                                    <p><sup>*</sup>Please select the preferred shipping method to use on this order.</p>
                                    <div class="radio">
                                        <label>
                                            {{ form.delivery_method }}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel_default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-trigger collapsed" data-toggle="collapse"
                                       data-parent="#accordion"
                                       href="#payment-method">Step 3: Payment Method <i class="fa fa-caret-down"></i>
                                    </a>
                                </h4>
                            </div>
                            <div id="payment-method" class="collapse">
                                <div class="panel-body">
                                    <p><sup>*</sup>Please select the preferred payment method to use on this order.</p>
                                    <div class="radio">
                                        <label>
                                            {{ form.payment_method }}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel_default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-trigger collapsed" data-toggle="collapse"
                                       data-parent="#accordion"
                                       href="#checkout-confirm">Step 4: Confirm Order <i class="fa fa-caret-down"></i>
                                    </a>
                                </h4>
                            </div>
                            <div id="checkout-confirm" class="collapse">
                                <div class="panel-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered table-hover">
                                            <thead>
                                            <tr>
                                                <td class="text-left">Product</td>
                                                <td class="text-left">Model</td>
                                                <td class="text-left">Quantity</td>
                                                <td class="text-left">Price</td>
                                                <td class="text-left">Total</td>
                                            </tr>
                                            </thead>
                                            {% for p_cart in products_cart %}
                                            <tbody>
                                            <tr>
                                                <td class="text-left">
                                                    <a href="{{ p_cart.product.get_absolute_url }}">
                                                        <img src="{{ p_cart.product.first_photo }}" width="50"
                                                             height="50" alt="">
                                                        <span>{{ p_cart.product.title }}</span></a>
                                                </td>
                                                <td class="text-left">{{ p_cart.quantity }}</td>
                                                <td class="text-left">{{ p_cart.product.price|intcomma }}</td>
                                                <td class="text-left">{{ p_cart.get_total_price|intcomma }}</td>
                                            </tr>
                                            </tbody>
                                            {% endfor %}
                                            <tfoot>
                                            <tr>
                                                <td class="text-right" colspan="4">
                                                    <strong>Total Price:</strong>
                                                </td>
                                                <td class="text-right">${{ cart.cart_total_price|intcomma }}</td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    <div class="buttons pull-right">
                                        <input class="btn btn-primary" type="submit" value="Confirm"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock main %}